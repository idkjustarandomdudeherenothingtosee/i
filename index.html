<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Custom Alphabet Decoder</title>
<style>
  body { background: #121212; color: #eee; font-family: monospace; padding: 20px; }
  textarea { width: 100%; font-family: monospace; margin-bottom: 10px; }
  button { padding: 10px 20px; font-size: 16px; }
  pre { background: #222; padding: 15px; white-space: pre-wrap; word-break: break-word; }
</style>
</head>
<body>

<h2>Decode with custom alphabet</h2>

<label>Paste your custom alphabet string (like your long variable name):</label><br/>
<textarea id="alphabet" rows="4" placeholder="Paste long alphabet string here..."></textarea><br/>

<label>Paste your encoded string to decode:</label><br/>
<textarea id="encoded" rows="6" placeholder="Paste encoded string here..."></textarea><br/>

<button onclick="decode()">Decode</button>

<h3>Decoded output:</h3>
<pre id="output"></pre>

<script>
function decode() {
  const alphabetRaw = document.getElementById('alphabet').value.trim();
  const encoded = document.getElementById('encoded').value.trim();

  // Extract unique characters in order for alphabet
  let seen = new Set();
  let alphabet = '';
  for (let ch of alphabetRaw) {
    if (!seen.has(ch)) {
      seen.add(ch);
      alphabet += ch;
    }
  }

  if (alphabet.length !== 64) {
    document.getElementById('output').textContent = 
      `Error: Alphabet must contain exactly 64 unique characters.\n` +
      `Your alphabet has ${alphabet.length} unique characters.`;
    return;
  }

  let bits = 0, value = 0;
  let output = [];

  for (let c of encoded) {
    let idx = alphabet.indexOf(c);
    if (idx === -1) {
      document.getElementById('output').textContent = `Error: Invalid character '${c}' in encoded string.`;
      return;
    }

    value = (value << 6) | idx;
    bits += 6;

    if (bits >= 8) {
      bits -= 8;
      output.push(String.fromCharCode((value >> bits) & 0xFF));
    }
  }

  document.getElementById('output').textContent = output.join('');
}
</script>

</body>
</html>
